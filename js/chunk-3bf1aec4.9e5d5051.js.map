{"version":3,"sources":["webpack:///./src/views/Changepassword.vue?ef71","webpack:///src/views/Changepassword.vue","webpack:///./src/views/Changepassword.vue?1a23","webpack:///./src/views/Changepassword.vue","webpack:///./src/views/Changepassword.vue?e604"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","xiuonSubmit","_v","_s","_f","phone","attrs","pattern","message","model","value","callback","$$v","xiupassword","expression","$event","blur","xiupasswords","scopedSlots","_u","key","fn","stopPropagation","preventDefault","sms","proxy","xiusms","staticStyle","staticRenderFns","component"],"mappings":"gJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,WAAW,CAACG,GAAG,CAAC,OAASP,EAAIQ,cAAc,CAACJ,EAAG,MAAM,CAACE,YAAY,SAAS,CAACN,EAAIS,GAAG,UAAUL,EAAG,OAAO,CAACJ,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,GAAG,OAAPX,CAAeA,EAAIY,aAAaR,EAAG,YAAY,CAACS,MAAM,CAAC,KAAO,WAAW,KAAO,cAAc,YAAc,QAAQ,MAAQ,CAC9W,CAAEC,QAAQ,aAAaC,QAAQ,wBAC5BC,MAAM,CAACC,MAAOjB,EAAe,YAAEkB,SAAS,SAAUC,GAAMnB,EAAIoB,YAAYD,GAAKE,WAAW,iBAAiBjB,EAAG,YAAY,CAACS,MAAM,CAAC,KAAO,WAAW,KAAO,eAAe,YAAc,QAAQ,MAAQ,CACzM,CAAEC,QAAQ,aAAaC,QAAQ,wBAC5BR,GAAG,CAAC,KAAO,SAASe,GAAQ,OAAOtB,EAAIuB,KAAKvB,EAAIwB,gBAAgBR,MAAM,CAACC,MAAOjB,EAAgB,aAAEkB,SAAS,SAAUC,GAAMnB,EAAIwB,aAAaL,GAAKE,WAAW,kBAAkBjB,EAAG,YAAY,CAACS,MAAM,CAAC,KAAO,SAAS,OAAS,GAAG,UAAY,GAAG,YAAc,SAASY,YAAYzB,EAAI0B,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,WAAW,MAAO,CAACxB,EAAG,aAAa,CAACS,MAAM,CAAC,KAAO,QAAQ,KAAO,UAAU,MAAQ,GAAG,MAAQ,+CAA+CN,GAAG,CAAC,MAAQ,SAASe,GAAyD,OAAjDA,EAAOO,kBAAkBP,EAAOQ,iBAAwB9B,EAAI+B,IAAIT,MAAW,CAACtB,EAAIS,GAAG,aAAauB,OAAM,KAAQhB,MAAM,CAACC,MAAOjB,EAAU,OAAEkB,SAAS,SAAUC,GAAMnB,EAAIiC,OAAOd,GAAKE,WAAW,YAAYjB,EAAG,MAAM,CAAC8B,YAAY,CAAC,OAAS,SAAS,CAAC9B,EAAG,aAAa,CAACS,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,KAAO,OAAO,cAAc,SAAS,MAAQ,gDAAgD,CAACb,EAAIS,GAAG,WAAW,IAAI,IAAI,IAC33B0B,EAAkB,GCoCtB,GACE,KADF,WAEI,MAAJ,CACM,MAAN,GACM,YAAN,GACM,aAAN,GACM,OAAN,GACM,KAAN,EACM,OAAN,KAGE,QAXF,WAWI,IAAJ,OAEI,KAAJ,gDAEM,EAAN,0BAEI,KAAJ,8CAEM,EAAN,4BAGE,QAAF,CACI,IADJ,WACM,IAAN,OACA,aAEQ,KAAR,mCACU,IAAV,YACU,MAAV,WACU,KAAV,KACA,kBAEU,EAAV,OACA,SAEY,EAAZ,kBASI,YAtBJ,SAsBA,GAAM,IAAN,OAEM,KAAN,mCACQ,QAAR,WACQ,QAAR,SACQ,KAAR,GACQ,SAAR,iBACA,kBACQ,EAAR,mBACA,oBACU,EAAV,mBAII,KApCJ,SAoCA,GACA,oBAEQ,KAAR,QAEQ,KAAR,kBACQ,KAAR,UAIE,QAAF,CACI,KADJ,SACA,GACM,IAAN,mBACA,iBACM,OAAN,cCjHwV,I,wBCQpVC,EAAY,eACd,EACArC,EACAoC,GACA,EACA,KACA,KACA,MAIa,aAAAC,E,2CCnBf","file":"js/chunk-3bf1aec4.9e5d5051.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"changepassword\"},[_c('van-form',{on:{\"submit\":_vm.xiuonSubmit}},[_c('div',{staticClass:\"zhuce\"},[_vm._v(\"当前手机号:\"),_c('span',[_vm._v(_vm._s(_vm._f(\"data\")(_vm.phone)))])]),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"xiupassword\",\"placeholder\":\"设置新密码\",\"rules\":[\n                { pattern:/^\\w{4,10}$/,message:'密码由4~10位数字,大小写字母组成'}\n                ]},model:{value:(_vm.xiupassword),callback:function ($$v) {_vm.xiupassword=$$v},expression:\"xiupassword\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"xiupasswords\",\"placeholder\":\"确认新密码\",\"rules\":[\n                { pattern:/^\\w{4,10}$/,message:'密码由4~10位数字,大小写字母组成'}\n                ]},on:{\"blur\":function($event){return _vm.blur(_vm.xiupasswords)}},model:{value:(_vm.xiupasswords),callback:function ($$v) {_vm.xiupasswords=$$v},expression:\"xiupasswords\"}}),_c('van-field',{attrs:{\"name\":\"xiusms\",\"center\":\"\",\"clearable\":\"\",\"placeholder\":\"填写验证码\"},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_c('van-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"round\":\"\",\"color\":\"linear-gradient(to right, #f55d45, #fe8b3c)\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.sms($event)}}},[_vm._v(\"发送验证码\")])]},proxy:true}]),model:{value:(_vm.xiusms),callback:function ($$v) {_vm.xiusms=$$v},expression:\"xiusms\"}}),_c('div',{staticStyle:{\"margin\":\"30px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\",\"color\":\"linear-gradient(to right, #f55d45, #fe8b3c)\"}},[_vm._v(\"确定修改\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"changepassword\">\r\n         <van-form @submit=\"xiuonSubmit\">\r\n                <div class=\"zhuce\">当前手机号:<span>{{phone|data()}}</span></div>\r\n                <van-field\r\n                    v-model=\"xiupassword\"\r\n                    type=\"password\"\r\n                    name=\"xiupassword\"\r\n                    placeholder=\"设置新密码\"\r\n                    :rules=\"[\r\n                    { pattern:/^\\w{4,10}$/,message:'密码由4~10位数字,大小写字母组成'}\r\n                    ]\"\r\n                />\r\n                <van-field\r\n                    v-model=\"xiupasswords\"\r\n                    type=\"password\"\r\n                    name=\"xiupasswords\"\r\n                    placeholder=\"确认新密码\"\r\n                    @blur=\"blur(xiupasswords)\"\r\n                    :rules=\"[\r\n                    { pattern:/^\\w{4,10}$/,message:'密码由4~10位数字,大小写字母组成'}\r\n                    ]\"\r\n                />\r\n                 <van-field\r\n                    v-model=\"xiusms\"\r\n                    name=\"xiusms\"\r\n                    center\r\n                    clearable\r\n                    placeholder=\"填写验证码\"\r\n                    >\r\n                <template #button>\r\n                    <van-button size=\"small\" type=\"primary\" round @click.stop.prevent=\"sms\" color=\"linear-gradient(to right, #f55d45, #fe8b3c)\">发送验证码</van-button>\r\n                </template>\r\n                </van-field>\r\n                <div style=\"margin: 30px;\">\r\n                    <van-button round block type=\"info\" native-type=\"submit\" color=\"linear-gradient(to right, #f55d45, #fe8b3c)\">确定修改</van-button>\r\n                </div>\r\n            </van-form>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            phone:'',\r\n            xiupassword:'',\r\n            xiupasswords:'',\r\n            xiusms:'',\r\n            yes:false,\r\n            smskey:'',\r\n        }\r\n    },\r\n    created() {\r\n        //1.获取发送短信的key\r\n        this.axios.get('/api/verify_code').then(d=>{\r\n            console.log(d);\r\n            this.smskey=d.data.data.key;//获取发送短信的key\r\n        });\r\n        this.$axios.get('/api/userinfo').then(d=>{\r\n            console.log(d)\r\n            this.phone=d.data.data.phone\r\n        })\r\n    },\r\n    methods: {\r\n        sms(){\r\n            if(this.yes==true){\r\n            console.log(\"发送成功\")\r\n            this.$axios.post('api/register/verify',{\r\n            key:this.smskey,//发送验证码的key\r\n            phone:this.phone,//当前手机号\r\n            code:''\r\n        }).then(d=>{\r\n            console.log(\"获取验证码\",d);\r\n            d=d.data;\r\n            if(d.status==200){\r\n                //发送成功\r\n                this.$toast(d.msg)\r\n            }else{\r\n                this.$toast(d.msg)\r\n            }\r\n        })\r\n            }else{\r\n                console.log(\"发送失败\")\r\n            }\r\n        },\r\n        xiuonSubmit(event){\r\n            console.log(event)\r\n            this.$axios.post('/api/register/reset',{\r\n                account: this.phone,\r\n                captcha: event.xiusms,\r\n                code: \"\",\r\n                password: event.xiupasswords\r\n            }).then(d=>{\r\n                this.$toast(d.data.msg)\r\n                if(d.data.status==200){\r\n                    this.$router.go(-1);\r\n                }\r\n            })\r\n        },\r\n        blur(value){\r\n            if(this.xiupassword==value){\r\n                console.log(\"验证成功\")\r\n                this.yes=true\r\n            }else{\r\n                this.$toast(\"两次密码不一样\")\r\n                this.yes=false\r\n            }\r\n        }\r\n    },\r\n    filters:{\r\n        data(value){\r\n            let a=value.substring(0,3);\r\n            let b=value.substring(7)\r\n            return a+'****'+b\r\n        }\r\n        \r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n.changepassword{\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 375px;\r\n    height: 100vh;\r\n    background-color: white;\r\n    z-index: 9;\r\n    .zhuce{\r\n        margin-top: 30px;\r\n        display: flex;\r\n        justify-content: center;\r\n        font-size: 16px;\r\n        align-items: center;\r\n        font-weight: bold;\r\n        span{\r\n            color: #333;\r\n            font-weight: normal;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Changepassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Changepassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Changepassword.vue?vue&type=template&id=b32a029a&\"\nimport script from \"./Changepassword.vue?vue&type=script&lang=js&\"\nexport * from \"./Changepassword.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Changepassword.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Changepassword.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}