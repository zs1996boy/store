(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42a7d6a8"],{"0580":function(e,t,s){},"2d3b":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{on:{submit:e.submits}},[s("div",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"text",placeholder:"歌名/歌手"},domProps:{value:e.value},on:{input:[function(t){t.target.composing||(e.value=t.target.value)},e.input]}})])]),s(e.showcomponent,{tag:"component",attrs:{value:e.value},on:{submits:e.submits,play:function(t){return e.$emit("play",t)}}})],1)},n=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",[e._v("热门搜索:")]),e._l(e.hots,(function(t,o){return s("ul",{key:o},[s("li",{on:{click:function(s){return s.stopPropagation(),e.$emit("submits",{value:t.first})}}},[e._v(e._s(t.first))])])}))],2)},i=[],l={data(){return{hots:[]}},created(){this.axios.get("/search/hot").then(e=>{this.hots=e.data.result.hots,console.log(this.hots)})}},r=l,u=(s("add8"),s("2877")),c=Object(u["a"])(r,a,i,!1,null,"555c54c9",null),h=c.exports,d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",[e._v("搜索结果:")]),s("li-item",{attrs:{allsong:e.searchresult,value:e.value},on:{play:function(t){return e.$emit("play",t)}}}),s("load-img",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}]},[e._v("到底了")])],1)},m=[],p=s("8f4a"),v=s("f321"),g={components:{LiItem:p["a"],LoadImg:v["a"]},props:["value"],data(){return{searchresult:[],page:0,perpage:10,isLoading:!0}},created(){this.isLoading=!0,this.$axios.get("/search?keywords="+this.value).then(e=>{console.log(e),console.log(this.value),this.searchresult=e.data.result.songs.map(e=>(e.song={artists:[{name:e.artists[0].name}],album:e.album},this.isLoading=!1,e))}),window.addEventListener("scroll",this.onScroll)},methods:{onScroll(){let e=document.documentElement.scrollHeight||document.body.scrollHeight,t=document.documentElement.scrollTop||document.body.scrollTop,s=document.documentElement.clientHeight||document.body.clientHeight;e-t-s<5&&(console.log("加载更多"),this.loadMore())},loadMore(){this.isLoading=!0,this.page++,this.getresult()},getresult(){this.axios.get("/search",{params:{keywords:this.value,limit:this.perpage,offset:this.page*this.perpage}}).then(e=>{if(e.data.result.songs&&e.data.result&&e.data){let t=e.data.result.songs.map(e=>(e.song={artists:e.artists,album:e.album},e));this.isLoading=!1,this.searchresult=this.searchresult.concat(t)}else this.isLoading=!1})}},beforeRouteEnter(e,t,s){s(e=>{window.addEventListener("scroll",e.onScroll)})},beforeRouteLeave(e,t,s){window.removeEventListener("scroll",this.onScroll),s()},activated(){this.searchresult=[],this.getresult()}},f=g,w=(s("f01c"),Object(u["a"])(f,d,m,!1,null,"7b3c0d2b",null)),b=w.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",[e._v("搜索提示:"),s("span",{directives:[{name:"show",rawName:"v-show",value:e.songs.length<=0,expression:"songs.length<=0"}]})]),e._l(e.songs,(function(t){return s("ul",{key:t.id},[s("li",{on:{click:function(s){return s.stopPropagation(),e.$emit("submits",{value:t.name})}}},[e._v(e._s(t.name))])])}))],2)},y=[],L={props:["value"],data(){return{songs:[]}},created(){this.Mydata(this.value)},watch:{value(e){this.Mydata(e)}},methods:{Mydata(e){this.axios.get("/search/suggest?keywords="+e).then(e=>{this.songs=e.data.result.songs})},clicks(e){this.value=e}}},x=L,k=(s("848a"),Object(u["a"])(x,_,y,!1,null,"034319b7",null)),E=k.exports,$={name:"Search",components:{},data(){return{value:"",showcomponent:h}},methods:{input(){""==this.value?this.showcomponent=h:this.showcomponent=E},submits(e){e.value&&(this.value=e.value),this.showcomponent=b}},created(){this.axios.get("/personalized/newsong").then(e=>{console.log(e)})}},M=$,S=(s("d9ef"),Object(u["a"])(M,o,n,!1,null,"4fbb37e0",null));t["default"]=S.exports},"564c":function(e,t,s){},"6e44":function(e,t,s){},"848a":function(e,t,s){"use strict";s("564c")},add8:function(e,t,s){"use strict";s("0580")},d9ef:function(e,t,s){"use strict";s("ffe2")},f01c:function(e,t,s){"use strict";s("6e44")},ffe2:function(e,t,s){}}]);
//# sourceMappingURL=chunk-42a7d6a8.8fb68944.js.map